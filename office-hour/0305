 let viz = d3.select("#viz-container").append('svg')
    .attr('width', 500)
    .attr('height', 500)
    .style('background-color', 'lavender')
; 
// let numHands = 0;
function transformData(dataToClean){
  //    forEach    filter      map      reduce
  let newData = [];
  for(let i = 0 ; i < dataToClean.length; i++){
    console.log("loop i = ", i);
    console.log(dataToClean[i]);
    console.log(dataToClean[i].myBodyPart);
    // dataToClean[i].myBodyPart = dataToClean[i].myBodyPart.split(",");
    // https://www.w3schools.com/jsref/jsref_replace.asp
    dataToClean[i].myBodyPart = dataToClean[i].myBodyPart.replace(/, /g, ",").split(",");
    // to test if value is in array, we use .includes(value)
    // https://www.w3schools.com/jsref/jsref_includes_array.asp
    //   dataToClean[i].myBodyPart  is an array like ["hand", "leg"]
    // if(dataToClean[i].myBodyPart.includes("hand")){
    //   numHands++;
    // }
    dataToClean[i].testing = "HELLO";
    // we change the current element
    newData.push(dataToClean[i]);
    // append the changed element to newData
    console.log("--");
  }
  // return newData
  return newData
}
function gotData(incomingData){
  console.log(incomingData);
  // experiment ground
  // // forEach
  // for(let i = 0 ; i < incomingData.length; i++){
  //   let element = incomingData[i];
  // }
  // function everyItem(element){
  //   console.log("element is ", element);
  // }
  // incomingData.forEach(everyItem)
  // // filter
  // let newArray = [];
  // for(let i = 0 ; i < incomingData.length; i++){
  //   let element = incomingData[i];
  //   if(element.intensityOfTouch > 3){
  //     newArray.push(element)
  //   }
  // }
  //
  // japanese lady that helps you throw out old stuff you dont want
  // function filterFunction(element){
  //   if(element.intensityOfTouch > 3){
  //     return true
  //   }else{
  //     return false
  //   }
  // }
  // let filteredArray = incomingData.filter(filterFunction);
  let transformedData = transformData(incomingData)
  console.log("transformedData is", transformedData);
  // console.log("numHands is ", numHands);
  // we should keep functions like this outside gotData
  function filterHands(element){
    if(element.myBodyPart.includes("hand")){
      return true
    }else{
      return false
    }
  }
  let handsOnly = transformedData.filter(filterHands);
  console.log("handsOnly", handsOnly);
  // do cool things here
}
d3.json("data.json").then(gotData);
